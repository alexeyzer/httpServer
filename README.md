# Описание проекта

HTTP JSON API сервис, позволяющий хранить и подавать объявления

# Требования 

+ Язык программирования Go/PHP — очень желательно, так как это основные языки для нас (больше Go), но в целом мы не ограничиваем вас;
+ Финальную версию нужно выложить на github.com (просьба не делать форк этого репозитория, дабы не плодить плагиат);
+ Простая инструкция для запуска (в идеале — с возможностью запустить через docker-compose up, но это необязательно);
+ 3 метода: получение списка объявлений, получение одного объявления, создание объявления;
+ Валидация полей: не больше 3 ссылок на фото, описание не больше 1000 символов, название не больше 200 символов;
# Запуск

```
docker-compose up
```

# API

---

# Работа с объявлениями:

## Создание обьявления

+ параметры запроса
  + name - название объявления
  + description - описание объявления
  + price - стоимость товара/услуги
  + reference - список ссылок на фотографии
+ Параметры ответа:
  + id - id созданного объявления 
  + result - код результата
 
#### Запрос:
```
curl -X POST -d "name=Ботинки" -d "description=отличные ботинки" -d "price=100" \
-d "reference="http://picture1","http://picture2"" http://localhost:8080/adv/create
```
 
 #### Ответ
 
 ```
 {"id": 14, result: success}
 ```
 
 ## Получить список объявлений
 
 + параметры запросв
  + sort - Принимает на вход параметр, ко которому должна производится сортировка: price - для сортировки по цене, date для сортировки по дате создания. Для сортировки в обратном порядке нужно добавить "-" перед параметром price/date (опциональное поле)
  + page - номер страницы (опциональное поле)
+ Параметры ответа:
  + ListAdv - список объвлений
  обьявление состоит из следующих полей:
    + ID - id объявления
    + Name - название объявления
    + Description - описание объявления
    + Price - стоимость товара/услуги
    + Date - дата создания объявления
    + Ref - список ссылок ( в данном методе в данном списке всегда будет только главная ссылка на фотография <br> Ссылка состоит из следующих полей:
      + ID id ссылки
      + AdvId - id объявления
      + Ref - сама ссылка
  + NextPage - bool значение наличия следующей страницы
  
  #### Запрос:
```
curl http://localhost:8080/adv/list
```
 
 #### Ответ
 
 ```
{"ListAdv":[{"ID":1,"Name":"Ботинки","Description":"отличные ботинки","Price":100,"Date":"2021-06-21T14:33:20.999089Z","Ref":[{"ID":1,"AdvId":1,"Ref":"http://1"}]},
{"ID":2,"Name":"Джинсы","Description":"отличные джинсы","Price":200,"Date":"2021-06-21T14:33:55.080512Z","Ref":[{"ID":3,"AdvId":2,"Ref":"http://джинсы1"}],
"NextPage":false}
 ```

 #### Запрос:
```
curl http://localhost:8080/adv/list?sort=-price
```
 
 #### Ответ
 
 ```
{"ListAdv":[{"ID":2,"Name":"джинсы","Description":"отличные джинсы","Price":200,"Date":"2021-06-21T22:21:59.700056Z","Ref":[{"ID":3,"AdvId":2,"Ref":"http://1"}]},
{"ID":1,"Name":"Ботинки","Description":"отличные ботинки","Price":100,"Date":"2021-06-21T22:21:36.969454Z","Ref":[{"ID":1,"AdvId":1,"Ref":"http://picture1"}]}],
"NextPage":false}
 ```
 
 ## Получить конкретное объявление
 
 + параметры запроса
  + id - id объявления по которому будем искать (обязательно поле, без него будет ошибка)
  + fields -  описание, ссылки на все фото. (опциональное поле)
+ Параметры ответа:
  + Параметры ответа:
    + ID - id объявления
    + Name - название объявления
    + Description - описание объявления
    + Price - стоимость товара/услуги
    + Date - дата создания объявления
    + Ref - список ссылок (в данном методе в данном списке будет несколько ссылок на фотографии если при запросе указать параметр fields )<br> Ссылка состоит из следующих полей:
      + ID id ссылки
      + AdvId - id объявления
      + Ref - сама ссылка
  #### Запрос:
```
curl http://localhost:8080/adv/current?id=1&fields=1
```
 
 #### Ответ
 
 ```
{"ID":1,"Name":"Ботинки","Description":"отличные ботинки","Price":100,"Date":"2021-06-21T22:21:36.969454Z",
"Ref":[{"ID":1,"AdvId":1,"Ref":"http://picture1"},{"ID":2,"AdvId":1,"Ref":"http://picture2"}]} 
 ```
